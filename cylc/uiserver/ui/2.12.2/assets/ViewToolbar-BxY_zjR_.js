import{bU as O,bV as F,b_ as M,g as r,bl as ve,az as ae,cq as fe,c4 as me,cr as pe,cp as B,cm as ge,cs as he,ct as ke,aj as x,p as I,cu as H,y as P,R as W,F as T,b8 as b,cv as E,cw as Ie,cx as be,c5 as j,cy as ye,cz as $,a8 as J,A as K,cA as Ve,cB as we,C as ie,cC as Le,cD as Ae,cE as R,cF as Pe,cG as Te,K as le,cH as Se,cI as Ce,cJ as Ge,cK as k,cL as Q,cM as Be,cN as _e,a7 as X,cO as xe,cP as Oe,cQ as Fe,_ as Ne,cR as Re,b3 as je,cn as $e,cS as ze,cT as Me,v as _,r as Y,B as Ue,o as L,w as A,e as U,x as De,b4 as We,k as D,j as Ee,bM as Ke,t as Z,D as qe,bN as He}from"./index-Dq7pRljC.js";function Je(e){let{depth:a,isLast:n,isLastGroup:d,leafLinks:u,separateRoots:l,parentIndentLines:s,variant:v}=e;if(!s||!a)return{leaf:void 0,node:void 0,children:s};if(v==="simple")return{leaf:[...s,"line"],node:[...s,"line"],children:[...s,"line"]};const t=n&&(!d||l||a>1);return{leaf:[...s,t?"last-leaf":"leaf",...u?["leaf-link"]:[]],node:[...s,t?"last-leaf":"leaf"],children:[...s,t?"none":"line"]}}const Qe=F({start:Boolean,end:Boolean,...me(),...fe()},"VListItemAction"),se=O()({name:"VListItemAction",props:Qe(),setup(e,a){let{slots:n}=a;return M(()=>r(e.tag,{class:ae(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:ve(e.style)},n)),{}}});function Xe(e){const a=parseInt(e);if(!Number.isNaN(a))return`${2*Math.round(.2*a)/16}rem`}const Ye=e=>({icon:!0,variant:"text",size:e,style:{fontSize:Xe(e)}});function ee(e){const a={};return e===ke.isSkip?a.runtime={runMode:"Skip"}:a[e.field]=!0,a}const Ze=[{title:B.WAITING.name,value:B.WAITING.name,taskProps:{state:B.WAITING.name},children:pe.map(e=>({title:e.title,value:e.field,taskProps:ee(e)}))},...ge.filter(e=>e!==B.WAITING.name).map(e=>({title:e,value:e,taskProps:{state:e}})),{type:"divider"},...he.map(e=>({title:e.title,value:e.field,taskProps:ee(e)}))],et=F({...E(Ie({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),te=O()({name:"VTreeviewGroup",props:et(),setup(e,a){let{slots:n}=a;const d=x(),u=I(()=>d.value?.isOpen?e.collapseIcon:e.expandIcon),l=I(()=>({VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,toggleIcon:u.value}}));return M(()=>{const s=H.filterProps(e);return r(H,b(s,{ref:d,class:["v-treeview-group",e.class],subgroup:!0}),{...n,activator:n.activator?v=>P(T,null,[r(W,{defaults:l.value},{default:()=>[n.activator?.(v)]})]):void 0})}),{}}}),re=Symbol.for("vuetify:v-treeview"),ce=F({loading:Boolean,hideActions:Boolean,hasCustomPrepend:Boolean,indentLines:Array,toggleIcon:j,...be({slim:!0})},"VTreeviewItem"),ne=O()({name:"VTreeviewItem",props:ce(),emits:{toggleExpand:e=>!0},setup(e,a){let{slots:n,emit:d}=a;const u=ye(re,{visibleIds:x()}).visibleIds,l=x(),s=I(()=>l.value?.root.activatable.value&&l.value?.isGroupActivator),v=I(()=>l.value?.link.isClickable.value||e.value!=null&&!!l.value?.list),t=I(()=>!e.disabled&&e.link!==!1&&(e.link||v.value||s.value)),i=I(()=>u.value&&!u.value.has($(l.value?.id)));function c(f){t.value&&s.value&&l.value?.activate(!l.value?.isActivated,f)}function h(f){f.preventDefault(),f.stopPropagation(),d("toggleExpand",f)}return M(()=>{const f=J.filterProps(e),V=n.prepend||e.toggleIcon||e.indentLines||e.prependIcon||e.prependAvatar;return r(J,b({ref:l},f,{active:l.value?.isActivated||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":s.value,"v-treeview-item--filtered":i.value},e.class],ripple:!1,onClick:c}),{...n,prepend:V?w=>P(T,null,[e.indentLines&&e.indentLines.length>0?P("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map(S=>P("div",{class:ae(`v-treeview-indent-line v-treeview-indent-line--${S}`)},null))]):"",!e.hideActions&&r(se,{start:!0},{default:()=>[e.toggleIcon?P(T,null,[n.toggle?r(W,{key:"prepend-defaults",defaults:{VBtn:{density:"compact",icon:e.toggleIcon,variant:"text",loading:e.loading},VProgressCircular:{indeterminate:"disable-shrink",size:20,width:2}}},{default:()=>[n.toggle({...w,loading:e.loading,props:{onClick:h}})]}):r(K,{key:"prepend-toggle",density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:h},{loader:()=>r(Ve,{indeterminate:"disable-shrink",size:"20",width:"2"},null)})]):P("div",{class:"v-treeview-item__level"},null)]}),e.hasCustomPrepend?r(W,{key:"prepend-defaults",defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{start:!0}}},{default:()=>[n.prepend?.(w)]}):P(T,null,[n.prepend?.(w),e.prependAvatar&&r(we,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&r(ie,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]):void 0})}),Le({},l)}}),oe=F({fluid:Boolean,disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:j,default:"$checkboxIndeterminate"},falseIcon:j,trueIcon:j,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...Te(ce(),["hideActions"]),...Pe()},"VTreeviewChildren"),z=O()({name:"VTreeviewChildren",props:oe(),setup(e,a){let{slots:n}=a;const d=Ae(new Set),u=x([]),l=I(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function s(t){try{if(!e.items?.length||!e.loadChildren)return;t?.children?.length===0&&(d.add(t.value),await e.loadChildren(t.raw))}finally{d.delete(t.value)}}function v(t,i){e.selectable&&t(i)}return()=>n.default?.()??e.items?.map((t,i,c)=>{const{children:h,props:f}=t,V=d.has(t.value),w=!!c.at(i+1)?.children,S=e.path?.length??0,N=c.length-1===i,C={index:i,depth:S,isFirst:i===0,isLast:N,path:[...e.path,i],hideAction:e.hideActions},G=Je({depth:S,isLast:N,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions&&!e.fluid,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),g={toggle:n.toggle?o=>n.toggle?.({...o,...C,item:t.raw,internalItem:t,loading:V}):void 0,prepend:o=>P(T,null,[e.selectable&&(!h||h&&!["leaf","single-leaf"].includes(e.selectStrategy))&&r(se,{start:!0},{default:()=>[r(Ce,{key:t.value,modelValue:o.isSelected,disabled:e.disabled,loading:V,color:e.selectedColor,density:e.density,indeterminate:o.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":y=>v(o.select,y),onClick:y=>y.stopPropagation(),onKeydown:y=>{["Enter","Space"].includes(y.key)&&(y.stopPropagation(),v(o.select,o.isSelected))}},null)]}),n.prepend?.({...o,...C,item:t.raw,internalItem:t})]),append:n.append?o=>n.append?.({...o,...C,item:t.raw,internalItem:t}):void 0,title:n.title?o=>n.title?.({...o,item:t.raw,internalItem:t}):void 0,subtitle:n.subtitle?o=>n.subtitle?.({...o,item:t.raw,internalItem:t}):void 0},m=te.filterProps(f),p=z.filterProps({...e,...C});return h?r(te,b(m,{value:e.returnObject?t.raw:m?.value,rawId:m?.value}),{activator:o=>{let{props:y}=o;const q={...f,...y,value:f?.value,indentLines:G.node,onToggleExpand:[()=>s(t),y.onClick],onClick:l.value?[()=>s(t),y.onClick]:()=>v(u.value[i]?.select,!u.value[i]?.isSelected)};return R(n.header,{props:q,item:t.raw,internalItem:t,loading:V},()=>r(ne,b({ref:ue=>u.value[i]=ue},q,{hasCustomPrepend:!!n.prepend,hideActions:e.hideActions,value:e.returnObject?t.raw:f.value,loading:V}),g))},default:()=>r(z,b(p,{items:h,indentLinesVariant:e.indentLinesVariant,parentIndentLines:G.children,isLastGroup:w,returnObject:e.returnObject}),n)}):R(n.item,{props:f,item:t.raw,internalItem:t},()=>t.type==="divider"?R(n.divider,{props:t.raw},()=>r(le,t.props,null)):t.type==="subheader"?R(n.subheader,{props:t.raw},()=>r(Se,t.props,null)):r(ne,b(f,{hasCustomPrepend:!!n.prepend,hideActions:e.hideActions,indentLines:G.leaf,value:e.returnObject?$(t.raw):f.value}),g))})}});function de(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const n of e)a.push(n),n.children&&de(n.children,a);return a}const tt=F({openAll:Boolean,indentLines:[Boolean,String],search:String,...xe({filterKeys:["title"]}),...E(oe(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...E(Oe({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),nt=O()({name:"VTreeview",props:tt(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,a){let{slots:n,emit:d}=a;const{items:u}=Ge(e),l=k(()=>e.activeColor),s=k(()=>e.baseColor),v=k(()=>e.color),t=Q(e,"activated"),i=Q(e,"selected"),c=I({get:()=>e.modelValue??i.value,set(g){i.value=g,d("update:modelValue",g)}}),h=x(),f=I(()=>e.openAll?G(u.value):e.opened),V=I(()=>de(u.value)),w=k(()=>e.search),{filteredItems:S}=Be(e,V,w),N=I(()=>{if(!w.value)return null;const g=h.value?.getPath;return g?new Set(S.value.flatMap(m=>{const p=e.returnObject?m.raw:m.props.value;return[...g(p),...C(p)].map($)})):null});function C(g){const m=[],p=(h.value?.children.get(g)??[]).slice();for(;p.length;){const o=p.shift();o&&(m.push(o),p.push(...(h.value?.children.get(o)??[]).slice()))}return m}function G(g){let m=[];for(const p of g)p.children&&(m.push(e.returnObject?$(p.raw):p.value),p.children&&(m=m.concat(G(p.children))));return m}return Fe(re,{visibleIds:N}),_e({VTreeviewGroup:{activeColor:l,baseColor:s,color:v,collapseIcon:k(()=>e.collapseIcon),expandIcon:k(()=>e.expandIcon)},VTreeviewItem:{activeClass:k(()=>e.activeClass),activeColor:l,baseColor:s,color:v,density:k(()=>e.density),disabled:k(()=>e.disabled),lines:k(()=>e.lines),variant:k(()=>e.variant)}}),M(()=>{const g=X.filterProps(e),m=z.filterProps(e),p=typeof e.indentLines=="boolean"?"default":e.indentLines;return r(X,b({ref:h},g,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],openStrategy:"multiple",style:e.style,opened:f.value,activated:t.value,"onUpdate:activated":o=>t.value=o,selected:c.value,"onUpdate:selected":o=>c.value=o}),{default:()=>[r(z,b(m,{density:e.density,returnObject:e.returnObject,items:u.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:p}),n)]})}),{}}}),at={name:"ViewToolbar",emits:["setOption"],components:{Task:je},icons:{mdiUndo:Re},props:{groups:{required:!0,type:Array},size:{type:String,default:"default"}},computed:{iGroups(){const e=[];let a,n,d,u,l,s;const v=this.getValues();for(const t of this.groups){a={...t,iControls:[]};for(const i of t.controls){switch(d=null,u=!1,l=i.props||{},s=i.action,s){case"toggle":d=c=>this.toggle(i,c);break;case"callback":d=c=>this.call(i,c);break;case"taskIDFilter":d=c=>this.set(i,c),i.icon=Me,s="input",l={placeholder:"Search     (globs supported)",...l};break;case"input":d=c=>this.set(i,c);break;case"taskStateFilter":s="menu",i.icon=ze,l={items:Ze,"indent-lines":!0,activatable:!0,"active-strategy":"independent","item-value":"value","task-state-icons":!0,...l},d=c=>this.set(i,c);break}for(const c of i.enableIf||[])if(!v[c]){u=!0;break}for(const c of i.disableIf||[])if(v[c]){u=!0;break}n={...i,action:s,props:l,callback:d,disabled:u},a.iControls.push(n)}e.push(a)}return e},btnProps(){return Ye(this.size)}},methods:{toggle(e,a){e.value=!e.value,this.$emit("setOption",e.key,e.value),a.currentTarget.blur()},call(e,a){e.callback(),a.currentTarget.blur()},getValues(){const e={};for(const a of this.groups)for(const n of a.controls)n.key&&(e[n.key]=n.value);return e},set(e,a){e.action==="taskStateFilter"&&a.some(n=>$e.includes(n))&&!a.includes(B.WAITING.name)&&a.push(B.WAITING.name),this.$emit("setOption",e.key,a)},autoResizeInput(e){e.type==="focus"||e.target.value?e.target.classList.add("expanded"):e.target.classList.remove("expanded")},isSet(e){return Array.isArray(e)?e.length:e}}},it={class:"c-view-toolbar"},lt=["data-cy"];function st(e,a,n,d,u,l){const s=Ue("Task");return L(),_("div",it,[(L(!0),_(T,null,Y(l.iGroups,v=>(L(),_("div",{class:"group",key:v.title},[(L(!0),_(T,null,Y(v.iControls,t=>(L(),_("div",{key:t.title,class:"control","data-cy":`control-${t.key}`},[r(He,{eager:"","close-on-content-click":!1},{activator:A(({props:i})=>[t.action==="input"?(L(),U(Ke,b({key:0,modelValue:t.value,"onUpdate:modelValue":c=>t.value=c,class:"input"},{ref_for:!0},t.props,{clearable:"","prepend-inner-icon":t.icon,"onUpdate:modelValue":t.callback,onFocus:l.autoResizeInput,onBlur:l.autoResizeInput}),null,16,["modelValue","onUpdate:modelValue","prepend-inner-icon","onFocus","onBlur"])):(L(),U(K,b({key:1,class:"control-btn"},{ref_for:!0},{...e.$attrs,...i,...l.btnProps},{onClick:c=>{t.action==="menu"||t.callback(c)},disabled:t.disabled,"aria-checked":t.value,color:l.isSet(t.value)?"blue":void 0,role:"switch",density:"compact"}),{default:A(()=>[r(ie,null,{default:A(()=>[D(Z(t.icon[t.value]||t.icon),1)]),_:2},1024),r(qe,null,{default:A(()=>[D(Z(t.title),1)]),_:2},1024)]),_:2},1040,["onClick","disabled","aria-checked","color"]))]),default:A(()=>[t.action==="menu"?(L(),U(We,{key:0},{default:A(()=>[r(K,{"prepend-icon":e.$options.icons.mdiUndo,variant:"plain",onClick:i=>t.callback([]),block:"",spaced:"end","data-cy":`control-${t.key}-reset`},{default:A(()=>[...a[0]||(a[0]=[D(" Reset ",-1)])]),_:1},8,["prepend-icon","onClick","data-cy"]),r(le),r(nt,b({ref_for:!0},t.props,{activated:t.value,"onUpdate:activated":[i=>t.value=i,t.callback],color:"blue",density:"compact",style:{"padding-top":"0"}}),Ee({_:2},[t.props["task-state-icons"]?{name:"prepend",fn:A(({item:i})=>[r(s,{task:i.taskProps},null,8,["task"])]),key:"0"}:void 0]),1040,["activated","onUpdate:activated"])]),_:2},1024)):De("",!0)]),_:2},1024)],8,lt))),128))]))),128))])}const ct=Ne(at,[["render",st]]);export{ct as V,Ye as b};
